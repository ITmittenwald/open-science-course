<section>
    <h2>How to make your research reproducible</h2>
    <h3 style="margin-top: 0.5em">
        Vaclav (Vashek) Petras</h3>
    <p class="title-foot">
        <a href="http://www.ncsu.edu/" title="North Carolina State University">NCSU</a>
        <a href="http://geospatial.ncsu.edu/osgeorel/" title="NCSU OSGeo Research and Education Laboratory">OSGeoREL</a>
        at
        <a href="http://geospatial.ncsu.edu/" title="Center for Geospatial Analytics">Center for Geospatial Analytics</a>
        <br>
        North Carolina State University
    </p>
    <p>
        US-IALE, Baltimore<br>
        April 9-13, 2017
    </p>
</section>


<section>
<h2>Open Science</h2>

<img src="img/spectrum_of_reproducible_research.png" class="stretch">
<p class="credit">
    CC BY-SA Comtebenoit,
    <a href="https://en.wikipedia.org/wiki/File:Spectrum_of_reproducible_research.png">Wikipedia</a>
    [Peng 2011, Rodríguez-Sánchez et al. 2016, Marwick 2016, Buckheit and Donoho 1995]
<!--
Peng, R. D. (2011). Reproducible research in computational science.
Science, 334(6060), 1226-1227.
DOI: 10.1126/science.1213847

Rodríguez-Sánchez, F., Bartomeus, I., Varela, S., Pérez-Luque, A.J.,
Ciencia reproducible: qué, por qué, cómoEcosistemas [en linea] 2016, 25
(Mayo-Agosto) : [Fecha de consulta: 4 de abril de 2017]
Disponible en:<http://www.redalyc.org/articulo.oa?id=54046745011>
ISSN 1132-6344

Marwick, B. (2016). Computational reproducibility in archaeological research:
basic principles and a case study of their implementation.
Journal of Archaeological Method and Theory, 1-27.
DOI: 10.1007/s10816-015-9272-9
-->
</p>
</section>

<!--
J. Buckheit and D. L. Donoho. Wavelets and Statistics, chapter Wavelab and reproducible research.
Springer-Verlag, Berlin, New York, 1995.
(paraphrased/pseudo-quote Jon Claerbout of Stanford)
An article about computational science in a scientific publication
is not the scholarship itself, it is merely advertising of the scholarship.
The actual scholarship is the complete software development environment
and the complete set of instructions which generated the figures.
-->

<section>
<h2>Scientists rely on software</h2>
    <blockquote style="width: 100%; margin: 0.1em;">
        <p>
            It's impossible to conduct research without software,
            say 7 out of 10 UK researchers
        </p>
        <p>
            <!-- &mdash; Simon Hettrick -->
            &mdash; Hettrick et al, UK Research Software Survey 2014
        </p>
    </blockquote>
<!--
<small>92% of academics use research software</small>
https://www.software.ac.uk/blog/2016-09-12-its-impossible-conduct-research-without-software-say-7-out-10-uk-researchers
-->
</section>


<section>
<h2>Software needs to be shared</h2>
    <blockquote style="width: 100%; margin: 0.1em;">
        <p>
            Software [...] developed as part of novel methods is as important
            for the method's implementation [...]
            Such software [...] must be made available to readers upon publication.
        </p>
        <p>
            &mdash;Nature Methods - 4, 189 (2007)
        </p>
    </blockquote>
<!--
scientific community we have been largely unsuccessful in sharing
our research methods and results in a reproducible way.

current scientific publishing requires more than writing a paper
new ways of sharing our research
-->
</section>


<!--Software solutions for software problem-->


<section>
<h2>Screenshots</h2>
<img src="img/r_in_lidar_1.png" width=300>
<img src="img/r_in_lidar_2.png" width=300>
<img src="img/r_in_lidar_3.png" width=300>
<!--Czech localization of MS Excel has function names in Czech-->
</section>

<section>
<h2>Scripting</h2>

Bash:
<pre class="bash" style="font-size: x-large;"><code>r.in.lidar input=points.las output=elevation -e
</code></pre>
Python:
<pre class="python" style="font-size: x-large;"><code>from grass.script import run_command
run_command("r.in.lidar", input="points.las", output="elevation", flags="e")
</code></pre>
R:
<pre class="python" style="font-size: x-large;"><code>library(rgrass7)
execGRASS("r.in.lidar", input="points.las", output="elevation", flags="e")
</code></pre>
<!--
We can use Python and other languages to access powerful software features in an automated way instead
of hoping we entered the same values as last time when rerunning the analysis with a new climate dataset.
-->
</section>



<section>
<h2>Paper: PDF</h2>

<img src="img/petras2015mapping_paper.png" class="stretch">
</section>


<section>
<h2>Paper: Code</h2>

<img src="img/spatio-temporal-countour-evolution_code.png" class="stretch">
</section>
<!--A terrain modeling paper will serve as an example of sharing a full description
of a published method.-->


<section>
<h2>Jupyter Notebook</h2>
<ul>
    <li>interactive document with text, code, and figures
    <li>languages: Python, R, Bash, C, C++, Octave, ...
    <li>alternatives: R Markdown (Notebook), Emacs Org-mode, ...
</ul>
<img src="img/jupyter.png" class="stretch box-glow">
<!-- Jupyter and R Markdown let us track the reasoning behind our experiments and analyses. -->
</section>


<section>
<h2>File versions</h2>

<img src="img/file_versions.png" class="stretch box-glow">
</section>


<section>
<h2>Revision control</h2>
Git
<!--
collaborate and keep track
of our constantly evolving methods and R scripts.
-->
<br>
<img src="img/revisions.svg" class="stretch">
<pre class="bash" style="font-size: x-large;"><code>git commit script.py -m "replaced part of the main equation"
</code></pre>
<br>
There are a GUIs as well.
</section>


<section>
<h3>Publishing a model</h3>
<img src="img/futures_paper.png" class="stretch">
<small class="glow">
    Meentemeyer, R. K., Tang, W., Dorning, M. A., Vogler, J. B.,
    Cunniffe, N. J., and Shoemaker, D. A. (2013).
    <em>FUTURES: Multilevel Simulations of Emerging Urban-Rural Landscape Structure
    Using a Stochastic Patch-Growing Algorithm.</em>
    Annals of the Association of American Geographers, 103(4), 785-807.
    <br>
    “urban growth model for landscape ecologists”
</small>
<!-- A landscape change model will be used to demonstrate reusable research. -->
</section>

<section>
<h3>Source code</h3>
<img src="img/futures_src.png" class="stretch">
</section>

<section>
<h3>Source code history</h3>
<img src="img/futures_log.png" class="stretch">
</section>

<section>
<h3>Documentation</h3>
<img src="img/futures_doc.png" class="stretch">
</section>


<section>
<h3>Graphical user interface</h3>
<img src="img/futures_gui.png" class="stretch box-glow">
</section>


<section>
<h3>Integration into a larger project</h3>
<em>Do I want to create new open source project?</em>
<ul>
    <li>Preprocessing, visualization, and user interface (GUI, CLI, API)
    <li>Integration with existing analytical tools
    <li>Inputs, outputs, memory management
</ul>
<p>
<img src="img/logos/grass_gis_nobg.png" width=100>
<br>
FUTURES model implemented as GRASS GIS modules
<br>
<em>r.futures.pga, r.futures.demand, r.futures.parallelpga, ...</em>
<p>
Alternatives: R package, Python package, QGIS plugin, ...
</section>


<section>
<h2>Complete environment</h2>
<table>
    <tr>
        <th></th>
        <th>Docker</th>
        <th>Vagrant</th>
        <th>Virtual machine</th>
        <th>Any computer</th>
        <th>My laptop</th>
    </tr>
    <tr>
        <td>What is required to recreate it and run the software?</td>
        <td>text file</td>
        <td>text file</td>
        <td>large binary file</td>
        <td>text</td>
        <td>nothing*</td>
    </tr>
    <tr>
        <td>How are the dependencies handled?</td>
        <td>specified</td>
        <td>specified</td>
        <td>present</td>
        <td>?</td>
        <td>?</td>
    </tr>
    <tr>
        <td>What is the overhead running it?</td>
        <td>low</td>
        <td>high</td>
        <td>high</td>
        <td>none</td>
        <td>none*</td>
    </tr>
</table>
<small>*Except that I'm not borrowing you my laptop.</small>
<!--
Docker and Vagrant let us wrap entire workflow into one runtime environment
so that our species distribution model can be used without our personal laptop.
-->
</section>

<section>
<h2>Published research</h2>
<table class="row-based">
    <tr>
        <td>Paper</td>
        <td>
            background, method description, results, discussion, use cases
            (PDF, HTML, ...)
        </td>
    </tr>
    <tr>
        <td>Environment</td>
        <td>
            description of dependencies, the dependencies
            <small>(Docker, Vagrant)</small>
        </td>
    </tr>
    <tr>
        <td>Specific code</td>
        <td>
            paper-specific code, data-specific code
            <small>(Jupyter Notebook, R Markdown, Bash script)</small>
        </td>
    </tr>
    <tr>
        <td>Reusable code</td>
        <td>
            general code, better scripts, documentation
            <small>(R package, QGIS plugin, GRASS GIS module)</small>
        </td>
    </tr>
</table>
<small>In the future, paper and "notebooks" may become one.</small>
<!--
This talk will discuss several tools for reproducible research
and show practical examples which will make your life and lives of your colleagues easier.

Finally, a paper about vegetation structure will show how all pieces
of the puzzle fit together.
-->
</section>


<section>
<h2>Published research</h2>
<table class="row-based">
    <tr>
        <td>Paper</td>
        <td>
            background, method, results, discussion
            <small>(PDF, HTML)</small>
        </td>
    </tr>
    <tr>
        <td>Environment</td>
        <td>
            details about all dependencies
            <small>(Git, GitHub, Dockerfile, Docker, Linux, Travis-CI)</small>
        </td>
    </tr>
    <tr>
        <td>Specific code</td>
        <td>
            scripts to perform the analyses
            <small>(Bash and Python)</small>
        </td>
    </tr>
    <tr>
        <td>Reusable&nbsp;code</td>
        <td>
            methods as GRASS GIS modules
            <small>(Python and C)</small>
        </td>
    </tr>
</table>
<small>
    Petras, V., D. J. Newcomb, and H. Mitasova.
    <em>Generalized 3D fragmentation index derived from lidar point clouds.</em>
    In: Open Geospatial Data, Software and Standards [in print]
</small>
<!--
This talk will discuss several tools for reproducible research
and show practical examples which will make your life and lives of your colleagues easier.

Finally, a paper about vegetation structure will show how all pieces
of the puzzle fit together.
-->
</section>


<section>
<h2>Like irreproducibility more?</h2>
<img src="img/top_tips_to_make_your_research_irreproducible.png" class="stretch box-glow">
</section>

<section>
<h2>Tools for open geospatial science</h2>
<ul>
    <li>open science course
    <li> fall 2017
    <li><a href="https://goo.gl/g8pFiE">goo.gl/g8pFiE</a>
</ul>
<br>
<img src="../img/gear_wheel.png" class="stretch">
<!-- Jupyter and R Markdown let us track the reasoning behind our experiments and analyses. -->
</section>
